# Игнорирование файлов в Git

> Правила из `.gitignore` применяются только к новым (`untracked`) файлам. Если файл уже попал в staging area или в коммит, то правила на него не распространяются.

## Комментарий
Если строка начинается с `#`, то это комментарий, и `.gitignore` не будет его учитывать.

```Bash
# вот так можно писать комментарии;
# они ничего не значат для .gitignore,
# но они могут быть полезны, чтобы понять, зачем было добавлено то или иное правило 
```

## Просто название файла
Допустим, нужно, чтобы Git игнорировал все файлы `.DS_Store`. Для этого достаточно добавить в `.gitignore` строку с названием файла.

```Bash
# для macOS
.DS_Store 
```

В таком случае Git будет игнорировать файлы с именем .DS_Store, причём не только в корне репозитория, но и во всех вложенных папках.

## Звёздочка (`*`)
Символ звёздочки (`*`) соответствует любой строке, включая пустую. Если такой символ используется в шаблоне в `.gitignore`, значит, файл будет проигнорирован вне зависимости от того, что будет на месте звёздочки.

```Bash
# игнорировать все файлы, которые заканчиваются на .jpeg
*.jpeg

# игнорировать все файлы "tmp" во всех подпапках папки docs
docs/*/tmp 
```

Теперь Git будет игнорировать все файлы, которые заканчиваются на .jpeg — пригодится тем, кто не любит картинки. А также все временные файлы tmp (от англ. temporary — «временный») в подпапках папки docs. Например, Git проигнорирует файл docs/current/tmp.

> Если задать правило, которое состоит только из звёздочки, Git будет игнорировать все файлы. Это происходит потому, что под звёздочку подходит любое имя файла.

```Bash
# странное, но возможное правило
# "игнорировать все файлы"
* 
```

## Вопросительный знак (`?`)

Вопросительный знак `?` соответствует одному любому символу.

```Bash
file?.txt 
```

Если сохранить такую запись в .gitignore, то будут проигнорированы, например, файлы `fileA.txt` и `file1.txt`. А вот файл `file12.txt` не будет проигнорирован, потому что в его названии два символа после `file`, а не один.

## Квадратные скобки (`[…]`)

Квадратные скобки, как и вопросительный знак, соответствуют одному символу. При этом символ не любой, а только из списка, который указан в скобках.

```Bash
# игнорировать файлы file0.txt, file1.txt и file2.txt
# при этом не игнорировать file3.txt, file4.txt, ...
file[0-2].txt 
```

В скобках можно либо перечислить символы (`[abc]`), либо задать диапазон (`[a-z]`).

## Слеш (`/`)

Косая черта, или слеш (`/`), указывает на каталоги. Если шаблон в `.gitignore` начинается со слеша, то Git проигнорирует файлы или каталоги только в корневой директории.

```Bash
# игнорировать todo.txt в корне репозитория
/todo.txt

# для сравнения: spam.txt будет игнорироваться во всех папках
spam.txt 
```

Теперь файл `todo.txt` в корневом каталоге будет проигнорирован. При этом, например, файл `subdir/todo.txt` по-прежнему отслеживается.

Если шаблон заканчивается слешем, то правило применится только к папке.

```Bash
# игнорировать папку build
build/ 
```

> Обратите внимание: если build — это папка, то она будет проигнорирована. Если build — обычный файл, то он не подпадёт под правило и не будет игнорироваться.

## Парные звёздочки (`**`)

Функция парных звёздочек (`**`) похожа на функцию одинарной (`*`). Отличие в том, как они работают с вложенными папками. Двойная звёздочка может соответствовать любому количеству таких папок (в том числе нулю). Одинарная может соответствовать только одной.

```Bash
# игнорировать файлы "docs/current/tmp", "docs/old/tmp",
# а также "docs/old/saved/a/b/c/d/tmp"
# и даже "docs/tmp", потому что ноль вложенных папок тоже подходит
docs/**/tmp

# игнорировать только "docs/current/tmp" и "docs/old/tmp"
# файл "docs/old/saved/a/b/c/d/tmp" не попадает в правило
docs/*/tmp 
```

> Для двойной звёздочки верно то же самое, что и для одной: если задать правило `**`, то будут проигнорированы все файлы.

## Восклицательный знак (`!`)

Любое правило в файле `.gitignore` можно инвертировать с помощью восклицательного знака (!).

```Bash
# игнорировать все JPEG-файлы
*.jpeg

# но только не мем с Doge
!doge.jpeg
```

Теперь файл `doge.jpeg` будет отслеживаться, хотя остальные `jpeg`-файлы будут проигнорированы. Такие правила удобны для добавления исключений из других правил `.gitignore`.

## Пример файла `.gitignore`

Содержание `.gitignore` может быть таким.

```Bash
# игнорировать все файлы в каталоге build
build/

# игнорировать все .log файлы
*.log

# не игнорировать *.log файлы в examples
# потому что это пример для документации
!examples/**/*.log 
```

`.gitignore` и `git status`

Игнорируемые файлы не отображаются в выводе команды `git status`, иначе они бы засоряли вывод.

**Если всё же нужно отобразить все игнорируемые файлы**, то это можно сделать с помощью ключа **--ignored**: `git status --ignored`. В таком случае в выводе `git status` появится раздел `Ignored files`.

Перед вами настроенный `.gitignore`. Изучите его и разделите файлы на те, которые Git будет отслеживать, и те, которые он проигнорирует.

```Bash
*.log
!debug.log
/debug.bar
log[0-7].foo
logs/**/debug.log
```

| Будет отслеживать  | Проигнорирует  | 
|:------------- |:---------------:| 
| logseven.foo        | debug.bar        | 
| log8.foo         | log5.foo        | 
| debug.log         | foo.log      | 
| logs/debug.bar        | logs/monday/pm/debug.log | 


| Code | Description | Note |
|:----------|:----------|:----------|
| `.gitignore` | Если нужно, чтобы Git игнорировал какие-то файлы, стоит составить файл  |  Сам файл .gitignore — это обычный файл в репозитории. Его тоже стоит закоммитить.  |
| `git status --ignored` | Посмотреть, что игнорируется, можно с помощью команды |  |

## Задание для самостоятельной работы

Многие научные статьи оформляют с помощью TeX. Этот инструмент принимает на вход файлы с расширением .tex и выдаёт в качестве результата красиво оформленный .pdf. Но есть подвох: в процессе работы TeX также создаёт много временных файлов с расширениями вроде .aux, .lof, .lot и так далее.

Составьте файл .gitignore так, чтобы Git игнорировал все файлы, кроме .tex и .pdf. Вы можете свериться с авторским решением, но сначала рекомендуем попробовать выполнить задание самостоятельно

```Bash
# игнорировать все файлы
**

# кроме .tex и .pdf
!**.tex
!**.pdf
```

